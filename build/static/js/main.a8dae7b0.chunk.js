(this.webpackJsonptermproject=this.webpackJsonptermproject||[]).push([[0],{117:function(e,t){},124:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(57),o=a.n(r),l=a(6),i=a(1),s=a.n(i),u=function(e){return s.a.post("/users/register",e).then((function(e){return e.data}))},m=a(3),p=Object(m.a)(),d=a(58),g=a(59);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var E={username:""},b=Object(g.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":var a=f({},e,{username:t.data.username});return a;case"LOGOUT_USER":return E;default:return e}})),v=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(""),i=Object(l.a)(o,2),s=i[0],m=i[1],d=Object(n.useState)(""),g=Object(l.a)(d,2),h=g[0],f=g[1],E=Object(n.useState)(""),v=Object(l.a)(E,2),y=v[0],O=v[1];return c.a.createElement("div",{className:"user-input"},c.a.createElement("img",{src:"mainLogo.png",id:"register-logo",alt:"Logo for puppy poker"}),c.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),0===a.length||0===s.length||0===y.length)alert("Make sure you've filled in all of the fields");else if(s!==h)alert("Your passwords don't match");else{var t={username:a,password:s,email:y};u(t).then((function(){b.dispatch({type:"LOGIN_USER",data:{username:t.username}}),p.push("/gameslobby")})).catch((function(e){p.push("/register")}))}}},c.a.createElement("input",{type:"text",onChange:function(e){r(e.target.value)},placeholder:"Username",value:a}),c.a.createElement("br",null),c.a.createElement("input",{type:"password",onChange:function(e){m(e.target.value)},placeholder:"Password",value:s}),c.a.createElement("br",null),c.a.createElement("input",{type:"password",onChange:function(e){f(e.target.value)},placeholder:"Password",value:h}),c.a.createElement("br",null),c.a.createElement("input",{type:"email",onChange:function(e){O(e.target.value)},placeholder:"Email",value:y}),c.a.createElement("br",null),c.a.createElement("input",{type:"submit",value:"Register"})))},y=function(e){return s.a.post("users/login",e).then((function(e){return e.data}))},O=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(""),i=Object(l.a)(o,2),s=i[0],u=i[1];return c.a.createElement("div",{className:"user-input"},c.a.createElement("img",{src:"mainLogo.png",id:"login-logo",alt:"Logo for puppy poker"}),c.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),0===a.length||0===s.length)alert("Please enter your username and password.");else{var t={username:a,password:s};y(t).then((function(){b.dispatch({type:"LOGIN_USER",data:{username:t.username}}),localStorage.setItem("username",t.username),p.push("/gameslobby")})).catch((function(e){console.log(e)}))}}},c.a.createElement("input",{type:"text",value:a,onChange:function(e){r(e.target.value)},placeholder:"Username"}),c.a.createElement("br",null),c.a.createElement("input",{type:"password",value:s,onChange:function(e){u(e.target.value)},placeholder:"Password"}),c.a.createElement("br",null),c.a.createElement("input",{type:"submit",value:"Login"})))},S=function(){return s.a.get("gameslobby/allGames").then((function(e){return e.data}))},j=function(e){return s.a.post("gameslobby/".concat(e,"/createGame")).then((function(e){return e.data}))},C=(a(86),a(18)),I=a(19),w=a(21),k=a(20),N=a(22),L=(a(87),function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(w.a)(this,Object(k.a)(t).call(this,e))).state={},a}return Object(N.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"msgWrapper"},c.a.createElement("span",{id:"name"},this.props.username+":"),c.a.createElement("div",{id:"text"}," "+this.props.msg))}}]),t}(n.Component)),M=(a(88),a(13)),P=a.n(M),R=P()(),x=function(e){function t(e){var a;Object(C.a)(this,t);return console.log("Props",e.chatClass),(a=Object(w.a)(this,Object(k.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),0!==a.state.userMessage.length&&(R.emit("income-msg",{msg:a.state.userMessage,user:b.getState().username,path:window.location.pathname}),a.setState({userMessage:""}))},a.handleInputChange=function(e){e.preventDefault(),a.setState({userMessage:e.target.value})},a.state={chatMsgs:[],userMessage:"",income:0,path:"",perPath:"",chatclass:e.chatClass},a.chat="none",a}return Object(N.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.chat=document.getElementById("chat"),console.log(window.location.href),console.log(window.location.pathname),"/gameslobby"===window.location.pathname?R.emit("join",window.location.pathname):(R.emit("leaveRoom",{path:"/gameslobby"}),R.emit("join",window.location.pathname))}},{key:"componentDidUpdate",value:function(){null!==this.chat.scrollHeight&&(this.chat.scrollTop=this.chat.scrollHeight)}},{key:"componentWillMount",value:function(){var e=this;R.on("chat",(function(t){var a=t.incomeMsg,n=t.user;e.state.chatMsgs.push(c.a.createElement(L,{username:n.charAt(0).toUpperCase()+n.slice(1),msg:a})),e.setState({income:1})}))}},{key:"render",value:function(){return"lobby"===this.state.chatclass?c.a.createElement("div",{className:"wrapper"},c.a.createElement("div",{className:"content"},c.a.createElement("div",{id:"chat-container"},c.a.createElement("div",{id:"chat"},this.state.chatMsgs),c.a.createElement("form",{id:"chatForm",onSubmit:this.handleSubmit,autoComplete:"off"},c.a.createElement("input",{type:"text",className:"chat-input",placeholder:"message",message:"userMessage",value:this.state.userMessage,onChange:this.handleInputChange})),this.state.chatMsgs))):c.a.createElement("div",{className:"wrapper1"},c.a.createElement("div",{className:"content1"},c.a.createElement("div",{id:"chat-container1"},c.a.createElement("div",{id:"chat"},this.state.chatMsgs),c.a.createElement("form",{id:"chatForm",onSubmit:this.handleSubmit,autoComplete:"off"},c.a.createElement("input",{type:"text",className:"chat-input1",placeholder:"message",message:"userMessage",value:this.state.userMessage,onChange:this.handleInputChange})),this.state.chatMsgs)))}}]),t}(n.Component);var G=a(10),_=function(e){var t=e.gameId,a=e.players,n="gameslobby/".concat(t);return c.a.createElement("div",{className:"game-tile"},"Game:",t," Players: ",a,"/9 ",c.a.createElement(G.a,{to:n},"Join"))},U=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],o=function(){j(b.getState().username).then((function(e){p.push("/gameslobby/".concat(e))}))};console.log(localStorage.getItem("username"));var i=function(){b.dispatch({type:"LOGOUT_USER"}),localStorage.removeItem("username"),p.push("/")};return Object(n.useEffect)((function(){S().then((function(e){r(e)})).catch((function(e){console.log(e)}))}),[]),null===a?c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{onClick:o},"Create Game"),c.a.createElement("button",{onClick:i},"Logout"),c.a.createElement("h2",null,"Loading...")):c.a.createElement("div",{className:"gameslobby-container"},c.a.createElement("div",{id:"gameslobby-user-menu"}),c.a.createElement("div",{className:"chat-container"},c.a.createElement(x,{chatClass:"lobby"})),c.a.createElement("div",{className:"gameslobby-games-tiles"},c.a.createElement("h2",null,"Welcome ",localStorage.getItem("username"),"!"),c.a.createElement("button",{onClick:o},"Create Game"),c.a.createElement("button",{onClick:i},"Logout"),c.a.createElement("h2",null,"Active Games"),a.map((function(e){return c.a.createElement(_,{key:e.id,gameId:e.id,players:e.player_count})}))))},D=function(e){var t=e.card,a="resources/".concat(t,".png");return c.a.createElement("img",{src:a,alt:"This players hole card",id:"hole-card"})},T=function(e,t){return s.a.post("".concat(e,"/").concat(b.getState().username,"/").concat(t,"/join")).then((function(e){return e.data}))},B=function(e){var t=e.player,a=e.index,n=e.gameId;return null===t.username||t.isInHand?t.isInHand&&t.username===localStorage.getItem("username")?c.a.createElement("div",{className:"player",id:"player".concat(a)},c.a.createElement("div",{id:"card"},t.holeCards.map((function(e,t){return c.a.createElement(D,{key:t,card:e})}))),c.a.createElement("div",{className:"play-text-info"},c.a.createElement("div",null,t.username),c.a.createElement("div",null,"Chips: ",t.chipCount))):t.isInHand?c.a.createElement("div",{className:"player",id:"player".concat(a)},c.a.createElement("div",{id:"card"},t.holeCards.map((function(e,t){return c.a.createElement("img",{src:"gameslobby/resources/backOfCard.png",id:"hole-card"})}))),c.a.createElement("div",{className:"play-text-info"},c.a.createElement("div",null,t.username),c.a.createElement("div",null,"Chips: ",t.chipCount))):null===t.username?c.a.createElement("div",{id:"player".concat(a)},c.a.createElement("div",{className:"join-button",onClick:function(){T(n,a).then((function(){})).catch((function(e){console.log(e)}))}},"Join Game")):c.a.createElement("div",null):c.a.createElement("div",{className:"not-in-hand",id:"player".concat(a)},c.a.createElement("div",{className:"play-text-info"},c.a.createElement("div",null,t.username),c.a.createElement("div",null,"Chips: ",t.chipCount)))},F=function(e){var t=e.cards,a=e.currentBettingRound;return a>=4?c.a.createElement("div",{id:"community-cards"},t.map((function(e,t){return c.a.createElement(D,{key:t,card:e})}))):3===a?c.a.createElement("div",{id:"community-cards"},c.a.createElement(D,{card:t[0]}),c.a.createElement(D,{card:t[1]}),c.a.createElement(D,{card:t[2]}),c.a.createElement(D,{card:t[3]})):2===a?c.a.createElement("div",{id:"community-cards"},c.a.createElement(D,{card:t[0]}),c.a.createElement(D,{card:t[1]}),c.a.createElement(D,{card:t[2]})):c.a.createElement("div",{id:"community-cards"})},H=function(e){return s.a.post("".concat(e,"/").concat(b.getState().username,"/check")).then((function(e){return e.data}))},J=function(e){return s.a.post("".concat(e,"/").concat(b.getState().username,"/bet")).then((function(e){return e.data}))},W=function(e){return s.a.post("".concat(e,"/").concat(b.getState().username,"/raise")).then((function(e){return e.data}))},A=function(e){return s.a.post("".concat(e,"/").concat(b.getState().username,"/call")).then((function(e){return e.data}))},Y=function(e){return s.a.post("".concat(e,"/").concat(b.getState().username,"/fold")).then((function(e){return e.data}))},q=function(e){var t=e.isRaised,a=e.playerTurn,n=e.gameId;console.log(a);var r=function(){Y(n).then((function(){console.log("player fold")})).catch((function(){console.log("player fold")}))};return console.log("player turn "+a),console.log("local storage"+localStorage.getItem("playerposition")),localStorage.getItem("playerposition")==a?(console.log("inside conditional"),t>=0?c.a.createElement("div",{className:"player-turn-menu"},c.a.createElement("button",{onClick:function(){A(n).then((function(){console.log("player call")})).catch((function(){console.log("player call")}))}},"Call"),c.a.createElement("button",{onClick:function(){W(n).then((function(){console.log("player raise")})).catch((function(){console.log("player raise")}))}},"Raise"),c.a.createElement("button",{onClick:r},"Fold")):c.a.createElement("div",{className:"player-turn-menu"},c.a.createElement("button",{onClick:function(){H(n).then((function(){console.log("player checked")})).catch((function(){console.log("player checked")}))}},"Check"),c.a.createElement("button",{onClick:function(){J(n).then((function(){console.log("player bet")})).catch((function(){console.log("player bet")}))}},"Bet"),c.a.createElement("button",{onClick:r},"Fold"))):c.a.createElement("div",null)},z=function(e){return s.a.get("".concat(e,"/getGame")).then((function(e){return e.data}))},K=function(e){return s.a.post("".concat(e,"/gameOver")).then((function(e){return e}))},Q=function(e,t,a){var n=P()();s.a.post("".concat(e,"/").concat(t,"/leave")).then((function(t){var a;a=e,X.emit("leaveRoom",{path:a}),R.emit("leaveRoom",{path:window.location.pathname}),n.disconnect(),p.push("/gameslobby")})).catch((function(e){p.push("/gameslobby"),console.log(e)}))},V=function(e){var t=e.gameId,a=e.username;return c.a.createElement("button",{id:"leave-button",onClick:function(){Q(t,a),localStorage.removeItem("gameid")}},"Leave Game")},X=P()(),Z=function(e){var t=e.match,a=Object(n.useState)(null),r=Object(l.a)(a,2),o=r[0],i=r[1],s=t.params.id;return localStorage.setItem("gameid",s),X.emit("join",s),X.on("gameState",(function(e){i(e)})),Object(n.useEffect)((function(){z(s).then((function(e){i(e),console.log(o)})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){null!==o&&o.betting_round>4&&"jon"===localStorage.getItem("username")&&K(s)}),[o]),null!==o&&localStorage.setItem("playerposition",o.players.findIndex((function(e){return e.username===localStorage.getItem("username")}))),console.log(o),null===o?c.a.createElement("div",null,c.a.createElement("h2",null,"Loading...")):c.a.createElement("div",{id:"table"},c.a.createElement("div",{id:"pot"},"Pot: ",o.pot_amount),c.a.createElement(V,{gameId:s,username:b.getState().username,playerIndex:"1"}),o.players.map((function(e,t){return c.a.createElement(B,{key:e.username,player:e,index:t,gameId:s})})),c.a.createElement(F,{cards:o.community_cards,currentBettingRound:o.betting_round}),c.a.createElement(q,{isRaised:o.last_raised,gameId:s,playerTurn:o.current_player}),c.a.createElement(x,null))};var $=function(){return c.a.createElement("div",{id:"landing-page"},c.a.createElement("img",{src:"mainLogo.png",id:"main-logo",alt:"Logo for puppy poker"}),c.a.createElement(G.a,{to:"/login"},c.a.createElement("button",{id:"login",className:"landing-button"},"Login")),c.a.createElement(G.a,{to:"/register"},c.a.createElement("button",{id:"register",className:"landing-button"},"Register")))},ee=a(9),te=(a(56),a(63)),ae=a.n(te),ne=function(){return localStorage.getItem("username")&&b.dispatch({type:"LOGIN_USER",data:{username:localStorage.getItem("username")}}),c.a.createElement(ee.b,{history:p},c.a.createElement("div",{id:"app"},c.a.createElement(ee.c,null,c.a.createElement(ee.a,{path:"/",exact:!0,component:$}),c.a.createElement(ee.a,{path:"/login",component:O}),c.a.createElement(ee.a,{path:"/register",component:v}),c.a.createElement(ee.a,{path:"/gameslobby",exact:!0,component:U}),c.a.createElement(ee.a,{path:"/gameslobby/:id",component:Z}),c.a.createElement(ee.a,{path:"/chat",component:ae.a}))))};o.a.render(c.a.createElement(ne,null),document.getElementById("root"))},56:function(e,t,a){},63:function(e,t){},64:function(e,t,a){e.exports=a(124)},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.a8dae7b0.chunk.js.map